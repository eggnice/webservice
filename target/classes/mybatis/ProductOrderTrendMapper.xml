<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shsnc.yun.ws.dao.ProductOrderTrendDao">

	<!-- Map结果 -->
	<resultMap type="com.shsnc.yun.ws.entity.ProductOrderTrend" id="allMap">
		<result column="AMOUNT" property="total"/><!-- 产品订购数量 -->
		<result column="NAME" property="productName"/><!-- 产品名称 -->
	</resultMap>
	
	<!--
		原符号	  <	   <=	   >	   >=	    &	     '	      "
		替换符号	&lt;	&lt;=	&gt;	&gt;=	&amp;	&apos;	&quot;
	  -->
	
	<!-- 第一月产品订购趋势图 -->
	<select id="showFirstMonth" resultMap="allMap">
		SELECT COUNT(ooe.ID) AMOUNT, osl.`NAME` AS NAME
		FROM `opm_order_ext` ooe
		LEFT JOIN opm_service_info osi ON ooe.SERVICE_INFO_ID = osi.ID
		LEFT JOIN opm_service_list osl ON osi.CMP_SERVICE_LIST_ID = osl.ID
		WHERE ooe.`STATUS` = 6
		AND osl.`NAME` IN('云主机','公网IP','带宽','性能型云硬盘','容量型云硬盘','云空间',
		'子网','弹性负载均衡','云防火墙','弹性伸缩','对象存储','云主机安全','SAAS','模板编配',
		'云主机备份','路由器','WEB漏洞扫描','抗DDoS','HAVIP','WEB应用防护','IPSecVPN')
		AND ooe.ORDER_TIME &lt; date_add(curdate()-day(curdate())+1,interval -10 month)
		GROUP BY osl.`NAME`
	</select>
	 
	<!-- 第二月产品订购趋势图 -->
	<select id="showSecondMonth" resultMap="allMap">
		SELECT COUNT(ooe.ID) AMOUNT, osl.`NAME` AS NAME
		FROM `opm_order_ext` ooe
		LEFT JOIN opm_service_info osi ON ooe.SERVICE_INFO_ID = osi.ID
		LEFT JOIN opm_service_list osl ON osi.CMP_SERVICE_LIST_ID = osl.ID
		WHERE ooe.`STATUS` = 6
		AND osl.`NAME` IN('云主机','公网IP','带宽','性能型云硬盘','容量型云硬盘','云空间',
		'子网','弹性负载均衡','云防火墙','弹性伸缩','对象存储','云主机安全','SAAS','模板编配',
		'云主机备份','路由器','WEB漏洞扫描','抗DDoS','HAVIP','WEB应用防护','IPSecVPN')
		AND ooe.ORDER_TIME &lt; date_add(curdate()-day(curdate())+1,interval -9 month)
		GROUP BY osl.`NAME`
	</select>
	
	<!-- 第三月产品订购趋势图 -->
	<select id="showThirdMonth" resultMap="allMap">
		SELECT COUNT(ooe.ID) AMOUNT, osl.`NAME` AS NAME
		FROM `opm_order_ext` ooe
		LEFT JOIN opm_service_info osi ON ooe.SERVICE_INFO_ID = osi.ID
		LEFT JOIN opm_service_list osl ON osi.CMP_SERVICE_LIST_ID = osl.ID
		WHERE ooe.`STATUS` = 6
		AND osl.`NAME` IN('云主机','公网IP','带宽','性能型云硬盘','容量型云硬盘','云空间',
		'子网','弹性负载均衡','云防火墙','弹性伸缩','对象存储','云主机安全','SAAS','模板编配',
		'云主机备份','路由器','WEB漏洞扫描','抗DDoS','HAVIP','WEB应用防护','IPSecVPN')
		AND ooe.ORDER_TIME &lt; date_add(curdate()-day(curdate())+1,interval -8 month)
		GROUP BY osl.`NAME`
	</select>	

	<!-- 第四月产品订购趋势图 -->
	<select id="showFourthMonth" resultMap="allMap">
		SELECT COUNT(ooe.ID) AMOUNT, osl.`NAME` AS NAME
		FROM `opm_order_ext` ooe
		LEFT JOIN opm_service_info osi ON ooe.SERVICE_INFO_ID = osi.ID
		LEFT JOIN opm_service_list osl ON osi.CMP_SERVICE_LIST_ID = osl.ID
		WHERE ooe.`STATUS` = 6
		AND osl.`NAME` IN('云主机','公网IP','带宽','性能型云硬盘','容量型云硬盘','云空间',
		'子网','弹性负载均衡','云防火墙','弹性伸缩','对象存储','云主机安全','SAAS','模板编配',
		'云主机备份','路由器','WEB漏洞扫描','抗DDoS','HAVIP','WEB应用防护','IPSecVPN')
		AND ooe.ORDER_TIME &lt; date_add(curdate()-day(curdate())+1,interval -7 month)
		GROUP BY osl.`NAME`
	</select>	
		 
	<!-- 第五月产品订购趋势图 -->
	<select id="showFifthMonth" resultMap="allMap">
		SELECT COUNT(ooe.ID) AMOUNT, osl.`NAME` AS NAME
		FROM `opm_order_ext` ooe
		LEFT JOIN opm_service_info osi ON ooe.SERVICE_INFO_ID = osi.ID
		LEFT JOIN opm_service_list osl ON osi.CMP_SERVICE_LIST_ID = osl.ID
		WHERE ooe.`STATUS` = 6
		AND osl.`NAME` IN('云主机','公网IP','带宽','性能型云硬盘','容量型云硬盘','云空间',
		'子网','弹性负载均衡','云防火墙','弹性伸缩','对象存储','云主机安全','SAAS','模板编配',
		'云主机备份','路由器','WEB漏洞扫描','抗DDoS','HAVIP','WEB应用防护','IPSecVPN')
		AND ooe.ORDER_TIME &lt; date_add(curdate()-day(curdate())+1,interval -6 month)
		GROUP BY osl.`NAME`
	</select>	 
	 
	<!-- 第六月产品订购趋势图 -->
	<select id="showSixthMonth" resultMap="allMap">
		SELECT COUNT(ooe.ID) AMOUNT, osl.`NAME` AS NAME
		FROM `opm_order_ext` ooe
		LEFT JOIN opm_service_info osi ON ooe.SERVICE_INFO_ID = osi.ID
		LEFT JOIN opm_service_list osl ON osi.CMP_SERVICE_LIST_ID = osl.ID
		WHERE ooe.`STATUS` = 6
		AND osl.`NAME` IN('云主机','公网IP','带宽','性能型云硬盘','容量型云硬盘','云空间',
		'子网','弹性负载均衡','云防火墙','弹性伸缩','对象存储','云主机安全','SAAS','模板编配',
		'云主机备份','路由器','WEB漏洞扫描','抗DDoS','HAVIP','WEB应用防护','IPSecVPN')
		AND ooe.ORDER_TIME &lt; date_add(curdate()-day(curdate())+1,interval -5 month)
		GROUP BY osl.`NAME`
	</select>

	<!-- 第七月产品订购趋势图 -->
	<select id="showSeventhMonth" resultMap="allMap">
		SELECT COUNT(ooe.ID) AMOUNT, osl.`NAME` AS NAME
		FROM `opm_order_ext` ooe
		LEFT JOIN opm_service_info osi ON ooe.SERVICE_INFO_ID = osi.ID
		LEFT JOIN opm_service_list osl ON osi.CMP_SERVICE_LIST_ID = osl.ID
		WHERE ooe.`STATUS` = 6
		AND osl.`NAME` IN('云主机','公网IP','带宽','性能型云硬盘','容量型云硬盘','云空间',
		'子网','弹性负载均衡','云防火墙','弹性伸缩','对象存储','云主机安全','SAAS','模板编配',
		'云主机备份','路由器','WEB漏洞扫描','抗DDoS','HAVIP','WEB应用防护','IPSecVPN')
		AND ooe.ORDER_TIME &lt; date_add(curdate()-day(curdate())+1,interval -4 month)
		GROUP BY osl.`NAME`
	</select>
	 
	<!-- 第八月产品订购趋势图 -->
	<select id="showEighthMonth" resultMap="allMap">
		SELECT COUNT(ooe.ID) AMOUNT, osl.`NAME` AS NAME
		FROM `opm_order_ext` ooe
		LEFT JOIN opm_service_info osi ON ooe.SERVICE_INFO_ID = osi.ID
		LEFT JOIN opm_service_list osl ON osi.CMP_SERVICE_LIST_ID = osl.ID
		WHERE ooe.`STATUS` = 6
		AND osl.`NAME` IN('云主机','公网IP','带宽','性能型云硬盘','容量型云硬盘','云空间',
		'子网','弹性负载均衡','云防火墙','弹性伸缩','对象存储','云主机安全','SAAS','模板编配',
		'云主机备份','路由器','WEB漏洞扫描','抗DDoS','HAVIP','WEB应用防护','IPSecVPN')
		AND ooe.ORDER_TIME &lt; date_add(curdate()-day(curdate())+1,interval -3 month)
		GROUP BY osl.`NAME`
	</select>
	 
	<!-- 第九月产品订购趋势图 -->
	<select id="showNinthMonth" resultMap="allMap">
		SELECT COUNT(ooe.ID) AMOUNT, osl.`NAME` AS NAME
		FROM `opm_order_ext` ooe
		LEFT JOIN opm_service_info osi ON ooe.SERVICE_INFO_ID = osi.ID
		LEFT JOIN opm_service_list osl ON osi.CMP_SERVICE_LIST_ID = osl.ID
		WHERE ooe.`STATUS` = 6
		AND osl.`NAME` IN('云主机','公网IP','带宽','性能型云硬盘','容量型云硬盘','云空间',
		'子网','弹性负载均衡','云防火墙','弹性伸缩','对象存储','云主机安全','SAAS','模板编配',
		'云主机备份','路由器','WEB漏洞扫描','抗DDoS','HAVIP','WEB应用防护','IPSecVPN')
		AND ooe.ORDER_TIME &lt; date_add(curdate()-day(curdate())+1,interval -2 month)
		GROUP BY osl.`NAME`
	</select>
	 
	<!-- 第十月产品订购趋势图 -->
	<select id="showTenthMonth" resultMap="allMap">
		SELECT COUNT(ooe.ID) AMOUNT, osl.`NAME` AS NAME
		FROM `opm_order_ext` ooe
		LEFT JOIN opm_service_info osi ON ooe.SERVICE_INFO_ID = osi.ID
		LEFT JOIN opm_service_list osl ON osi.CMP_SERVICE_LIST_ID = osl.ID
		WHERE ooe.`STATUS` = 6
		AND osl.`NAME` IN('云主机','公网IP','带宽','性能型云硬盘','容量型云硬盘','云空间',
		'子网','弹性负载均衡','云防火墙','弹性伸缩','对象存储','云主机安全','SAAS','模板编配',
		'云主机备份','路由器','WEB漏洞扫描','抗DDoS','HAVIP','WEB应用防护','IPSecVPN')
		AND ooe.ORDER_TIME &lt; date_add(curdate()-day(curdate())+1,interval -1 month)
		GROUP BY osl.`NAME`
	</select>
	 
	<!-- 第十一月产品订购趋势图 -->
	<select id="showEleventhMonth" resultMap="allMap">
		SELECT COUNT(ooe.ID) AMOUNT, osl.`NAME` AS NAME
		FROM `opm_order_ext` ooe
		LEFT JOIN opm_service_info osi ON ooe.SERVICE_INFO_ID = osi.ID
		LEFT JOIN opm_service_list osl ON osi.CMP_SERVICE_LIST_ID = osl.ID
		WHERE ooe.`STATUS` = 6
		AND osl.`NAME` IN('云主机','公网IP','带宽','性能型云硬盘','容量型云硬盘','云空间',
		'子网','弹性负载均衡','云防火墙','弹性伸缩','对象存储','云主机安全','SAAS','模板编配',
		'云主机备份','路由器','WEB漏洞扫描','抗DDoS','HAVIP','WEB应用防护','IPSecVPN')
		AND ooe.ORDER_TIME &lt; date_add(curdate(), interval - day(curdate()) + 1 day)
		GROUP BY osl.`NAME`
	</select>
	 
	<!-- 第十二月产品订购趋势图 -->
	<select id="showTwelfthMonth" resultMap="allMap">
		SELECT COUNT(ooe.ID) AMOUNT, osl.`NAME` AS NAME
		FROM `opm_order_ext` ooe
		LEFT JOIN opm_service_info osi ON ooe.SERVICE_INFO_ID = osi.ID
		LEFT JOIN opm_service_list osl ON osi.CMP_SERVICE_LIST_ID = osl.ID
		WHERE ooe.`STATUS` = 6
		AND osl.`NAME` IN('云主机','公网IP','带宽','性能型云硬盘','容量型云硬盘','云空间',
		'子网','弹性负载均衡','云防火墙','弹性伸缩','对象存储','云主机安全','SAAS','模板编配',
		'云主机备份','路由器','WEB漏洞扫描','抗DDoS','HAVIP','WEB应用防护','IPSecVPN')
		AND ooe.ORDER_TIME &lt; now()
		GROUP BY osl.`NAME`
	</select>

</mapper>